<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Pet-Project - Users</title>
  <link rel="stylesheet" th:href="@{/styles/main.css}"/>
  <link href="../static/styles/main.css" rel="stylesheet"/>
  <script th:src="@{/js/authenticationCheck.js}" type="text/javascript"></script>
  <script src="http://localhost:35729/livereload.js"></script>
</head>
<body>
<div class="wrapper d-flex f-d-col jc-between ai-center">
  <div th:replace="~{fragments/header.html}"></div>
  <div class="content w-100 h-100 d-flex f-d-row jc-top">
    <div class="users-block w-100 d-flex f-d-col">
      <div class="title h2 padding-2">
        Users
      </div>
      <div class="users table d-flex f-d-col margin-1">
        <div class="table-header d-flex f-d-row jc-between padding-1 gap-2">
          <div>User Id</div>
          <div>Full Name</div>
          <div>Role</div>
          <div>Login</div>
          <div>Active</div>
          <div>Suspended</div>
        </div>
        <div class="table-item d-flex f-d-row jc-between padding-1 gap-2"
             th:classappend="${iterStat.last} ? last : not-last"
             th:each="user, iterStat : ${users}"
             th:onclick="|window.location.href='/users?id=${user.userId}&page=${page}'|">
          <div th:text="${user.userId}"></div>
          <div th:text="${user.fullName}"></div>
          <div th:text="${user.role.name}"></div>
          <div th:text="${user.login}"></div>
          <div th:text="${user.active}"></div>
          <div th:text="${user.suspended}"></div>
        </div>
        <div class="pageable d-flex jc-center gap-1 margin-1">
          <div class="prev page b" th:classappend="${page} <= 0 ? disabled : not-disabled"
               th:onclick="|window.location.href='/users?page=${page-1}'|">
            <
          </div>
          <div class="page b" th:classappend="${page} != ${i} ? not-current : current" th:each="i : ${#numbers.sequence(0, pages - 1)}"
               th:onclick="|window.location.href='/users?page=${i}'|"
               th:text="${i}"
          ></div>
          <div class="next page b" th:classappend="${page} < ${pages-1} ? not-disabled : disabled"
               th:onclick="|window.location.href='/users?page=${page+1}'|">
            >
          </div>
        </div>
      </div>
    </div>
    <div class="user-info w-25 info-block d-flex f-d-col gap-1 padding-1 margin-1">
      <div class="title h2">
        User info
      </div>
      <div class="info-block d-flex f-d-col gap-1" th:if="${requestUser} != null">
        <div class="full-name d-flex f-d-row jc-between gap-1">
          <div class="name b">Full Name:</div>
          <div class="text" th:text="${requestUser.fullName}"></div>
        </div>
        <div class="role d-flex f-d-row jc-between gap-1">
          <div class="name b">Role:</div>
          <div class="text" th:text="${requestUser.role.name}"></div>
        </div>
        <div class="login d-flex f-d-row jc-between gap-1">
          <div class="name b">Login:</div>
          <div class="text" th:text="${requestUser.login}"></div>
        </div>
        <div class="active d-flex f-d-row jc-between gap-1">
          <div class="name b">Active:</div>
          <div class="text" th:text="${requestUser.active}"></div>
        </div>
        <div class="suspended d-flex f-d-row jc-between gap-1">
          <div class="name b">Suspended</div>
          <div class="text" th:text="${requestUser.suspended}"></div>
        </div>
        <div class="button c3 w-100">
          <a th:classAppend="${requestUser.active} ? disabled : not-disabled"
             th:href="@{'/activateUser?id=' + ${requestUser.userId}}">Activate user</a>
        </div>
        <div class="button c3 w-100">
          <a th:classAppend="${requestUser.suspended} ? disabled : not-disabled"
             th:href="@{'/suspendUser?id=' + ${requestUser.userId}}">Suspend user</a>
        </div>
        <div class="button r1 c3 w-100"
             th:classAppend="${role != 'Admin'} ? disabled : not-disabled">
          <a th:href="@{'/deleteUser?id=' + ${requestUser.userId}}">Delete user</a>
        </div>
      </div>
      <div class="d-flex jc-center ai-center w-100 h-100" th:unless="${requestUser} != null">
        <div class="text h3">Nothing to show</div>
      </div>
    </div>
  </div>
  <div th:replace="~{fragments/footer.html}"></div>
</div>
</body>
</html>